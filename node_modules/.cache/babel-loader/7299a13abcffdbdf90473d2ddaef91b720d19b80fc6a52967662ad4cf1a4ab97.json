{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./ProfilePage.css';import UserInfo from'../../components/Profile/UserInfo';import CourseList from'../../components/Profile/CourseList';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProfilePage=()=>{const[user,setUser]=useState(null);const[enrolledCourses,setEnrolledCourses]=useState([]);const navigate=useNavigate();const[favouriteCourses,setFavouriteCourses]=useState([]);const storedFavourites=JSON.parse(localStorage.getItem('favourites'))||[];if(storedFavourites.length>0){Promise.all(storedFavourites.map(id=>fetch(\"http://localhost:8081/api/courses/getById/\".concat(id)).then(res=>res.json()).then(data=>data||null))).then(courseArray=>{const validCourses=courseArray.filter(c=>c!==null);setFavouriteCourses(validCourses);}).catch(err=>console.error('Error fetching favourite courses:',err));}const handleLogout=()=>{localStorage.removeItem('user');setUser(null);setEnrolledCourses([]);navigate('/login');};useEffect(()=>{const storedUser=JSON.parse(localStorage.getItem('user'));if(storedUser){setUser(storedUser);// Fetch enrolled courses\nfetch(\"http://localhost:8081/api/courses/user/\".concat(storedUser.userId)).then(res=>res.json()).then(data=>setEnrolledCourses(data)).catch(err=>console.error(err));}},[]);if(!user)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading profile...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-page-container\",children:[/*#__PURE__*/_jsx(UserInfo,{name:user.name,email:user.email}),/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"Enrolled Courses\"}),/*#__PURE__*/_jsx(CourseList,{courses:enrolledCourses}),/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"Favourited Courses\"}),/*#__PURE__*/_jsx(CourseList,{courses:favouriteCourses}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-button\",onClick:handleLogout,children:\"Log Out\"})]});};export default ProfilePage;","map":{"version":3,"names":["React","useEffect","useState","UserInfo","CourseList","useNavigate","jsx","_jsx","jsxs","_jsxs","ProfilePage","user","setUser","enrolledCourses","setEnrolledCourses","navigate","favouriteCourses","setFavouriteCourses","storedFavourites","JSON","parse","localStorage","getItem","length","Promise","all","map","id","fetch","concat","then","res","json","data","courseArray","validCourses","filter","c","catch","err","console","error","handleLogout","removeItem","storedUser","userId","children","className","name","email","courses","onClick"],"sources":["/Users/mariusbr/Documents/Data ingeniÃ¸r/4. Semester/AppDev&WebTech/gruppe oppgave/WebAndApplication-group-18/src/pages/ProfilePage/ProfilePage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './ProfilePage.css';\nimport UserInfo from '../../components/Profile/UserInfo';\nimport CourseList from '../../components/Profile/CourseList';\nimport { useNavigate } from 'react-router-dom';\n\nconst ProfilePage = () => {\n    const [user, setUser] = useState(null);\n    const [enrolledCourses, setEnrolledCourses] = useState([]);\n    const navigate = useNavigate();\n\n    const [favouriteCourses, setFavouriteCourses] = useState([]);\n\n    const storedFavourites = JSON.parse(localStorage.getItem('favourites')) || [];\n\n    if (storedFavourites.length > 0) {\n        Promise.all(\n            storedFavourites.map(id =>\n                fetch(`http://localhost:8081/api/courses/getById/${id}`)\n                    .then(res => res.json())\n                    .then(data => data || null)\n            )\n        )\n            .then(courseArray => {\n                const validCourses = courseArray.filter(c => c !== null);\n                setFavouriteCourses(validCourses);\n            })\n            .catch(err => console.error('Error fetching favourite courses:', err));\n    }\n\n    const handleLogout = () => {\n        localStorage.removeItem('user');\n        setUser(null);\n        setEnrolledCourses([]);\n        navigate('/login');\n    };\n\n    useEffect(() => {\n        const storedUser = JSON.parse(localStorage.getItem('user'));\n        if (storedUser) {\n            setUser(storedUser);\n\n            // Fetch enrolled courses\n            fetch(`http://localhost:8081/api/courses/user/${storedUser.userId}`)\n                .then(res => res.json())\n                .then(data => setEnrolledCourses(data))\n                .catch(err => console.error(err));\n        }\n    }, []);\n\n    if (!user) return <p>Loading profile...</p>;\n\n    return (\n        <div className=\"profile-page-container\">\n            <UserInfo\n                name={user.name}\n                email={user.email}\n            />\n\n            <h2 className=\"section-title\">Enrolled Courses</h2>\n            <CourseList courses={enrolledCourses} />\n\n            <h2 className=\"section-title\">Favourited Courses</h2>\n            <CourseList courses={favouriteCourses} />\n\n            <button className=\"logout-button\" onClick={handleLogout}>\n                Log Out\n            </button>\n        </div>\n    );\n};\n\nexport default ProfilePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}