{"ast":null,"code":"import _objectSpread from\"/Users/mariusbr/Documents/Data ingeni\\xF8r/4. Semester/AppDev&WebTech/gruppe oppgave/WebAndApplication-group-18/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import'./RegisterPage.css';import{Link,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RegisterPage=()=>{const navigate=useNavigate();const[formData,setFormData]=useState({name:'',email:'',password:'',confirmPassword:''});const[error,setError]=useState('');const[loading,setLoading]=useState(false);const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.id]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setError('');const{name,email,password,confirmPassword}=formData;if(!name||!email||!password||!confirmPassword){setError('All fields are required.');return;}if(password!==confirmPassword){setError('Passwords do not match.');return;}setLoading(true);try{// Step 1: Fetch all users to count\nconst userResponse=await fetch('http://localhost:8081/user/getAll');const users=await userResponse.json();const newUserId=(Array.isArray(users)?users.length:0)+1;// Step 2: Send registration request\nconst registerResponse=await fetch('http://localhost:8081/user/add',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId:newUserId,// manually assign ID\nname,email,password,role:'user'})});if(registerResponse.ok){alert('Account created successfully! Please log in.');navigate('/login');}else{const message=await registerResponse.text();setError(message||'Registration failed.');}}catch(err){console.error(err);setError('An error occurred during registration.');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"register-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"register-heading\",children:\"Create Your Lerniverse Connect Account\"}),/*#__PURE__*/_jsx(\"div\",{className:\"register-box\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"register-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"register-field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Full Name :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",placeholder:\"Your full name\",onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"register-field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"E-mail :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",placeholder:\"Enter your email\",onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"register-field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",placeholder:\"Create a password\",onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"register-field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",children:\"Confirm Password :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"confirmPassword\",placeholder:\"Repeat your password\",onChange:handleChange})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"register-buttons\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn submit\",disabled:loading,children:loading?'Registering...':'Register'})}),/*#__PURE__*/_jsxs(\"p\",{className:\"login-redirect\",children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Log in here\"})]})]})})]});};export default RegisterPage;","map":{"version":3,"names":["React","useState","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","RegisterPage","navigate","formData","setFormData","name","email","password","confirmPassword","error","setError","loading","setLoading","handleChange","e","_objectSpread","target","id","value","handleSubmit","preventDefault","userResponse","fetch","users","json","newUserId","Array","isArray","length","registerResponse","method","headers","body","JSON","stringify","userId","role","ok","alert","message","text","err","console","className","children","onSubmit","htmlFor","type","placeholder","onChange","disabled","to"],"sources":["/Users/mariusbr/Documents/Data ingeniÃ¸r/4. Semester/AppDev&WebTech/gruppe oppgave/WebAndApplication-group-18/src/pages/RegisterPage/RegisterPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport './RegisterPage.css';\nimport { Link, useNavigate } from 'react-router-dom';\n\nconst RegisterPage = () => {\n    const navigate = useNavigate();\n\n    const [formData, setFormData] = useState({\n        name: '',\n        email: '',\n        password: '',\n        confirmPassword: ''\n    });\n\n    const [error, setError] = useState('');\n    const [loading, setLoading] = useState(false);\n\n    const handleChange = (e) => {\n        setFormData({ ...formData, [e.target.id]: e.target.value });\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setError('');\n\n        const { name, email, password, confirmPassword } = formData;\n\n        if (!name || !email || !password || !confirmPassword) {\n            setError('All fields are required.');\n            return;\n        }\n\n        if (password !== confirmPassword) {\n            setError('Passwords do not match.');\n            return;\n        }\n\n        setLoading(true);\n\n        try {\n            // Step 1: Fetch all users to count\n            const userResponse = await fetch('http://localhost:8081/user/getAll');\n            const users = await userResponse.json();\n\n            const newUserId = (Array.isArray(users) ? users.length : 0) + 1;\n\n            // Step 2: Send registration request\n            const registerResponse = await fetch('http://localhost:8081/user/add', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    userId: newUserId,  // manually assign ID\n                    name,\n                    email,\n                    password,\n                    role: 'user'\n                })\n            });\n\n            if (registerResponse.ok) {\n                alert('Account created successfully! Please log in.');\n                navigate('/login');\n            } else {\n                const message = await registerResponse.text();\n                setError(message || 'Registration failed.');\n            }\n        } catch (err) {\n            console.error(err);\n            setError('An error occurred during registration.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"register-container\">\n            <h1 className=\"register-heading\">Create Your Lerniverse Connect Account</h1>\n\n            <div className=\"register-box\">\n                <form className=\"register-form\" onSubmit={handleSubmit}>\n                    <div className=\"register-field\">\n                        <label htmlFor=\"name\">Full Name :</label>\n                        <input type=\"text\" id=\"name\" placeholder=\"Your full name\" onChange={handleChange} />\n                    </div>\n\n                    <div className=\"register-field\">\n                        <label htmlFor=\"email\">E-mail :</label>\n                        <input type=\"email\" id=\"email\" placeholder=\"Enter your email\" onChange={handleChange} />\n                    </div>\n\n                    <div className=\"register-field\">\n                        <label htmlFor=\"password\">Password :</label>\n                        <input type=\"password\" id=\"password\" placeholder=\"Create a password\" onChange={handleChange} />\n                    </div>\n\n                    <div className=\"register-field\">\n                        <label htmlFor=\"confirmPassword\">Confirm Password :</label>\n                        <input type=\"password\" id=\"confirmPassword\" placeholder=\"Repeat your password\" onChange={handleChange} />\n                    </div>\n\n                    {error && <p className=\"error-message\">{error}</p>}\n\n                    <div className=\"register-buttons\">\n                        <button type=\"submit\" className=\"btn submit\" disabled={loading}>\n                            {loading ? 'Registering...' : 'Register'}\n                        </button>\n                    </div>\n\n                    <p className=\"login-redirect\">\n                        Already have an account? <Link to=\"/login\">Log in here</Link>\n                    </p>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default RegisterPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}