{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import CourseModal from'../../components/courseModal/CourseModal';import'./AllCoursesPage.css';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AllCoursesPage=()=>{const location=useLocation();const params=new URLSearchParams(location.search);const searchParam=params.get('search')||'';const[courses,setCourses]=useState([]);const[searchQuery,setSearchQuery]=useState(searchParam);const[selectedCourse,setSelectedCourse]=useState(null);const[user,setUser]=useState(null);const[favourites,setFavourites]=useState(()=>{const stored=localStorage.getItem('favourites');return stored?JSON.parse(stored):[];});const toggleFavourite=courseId=>{setFavourites(prev=>{const updated=prev.includes(courseId)?prev.filter(id=>id!==courseId):[...prev,courseId];localStorage.setItem('favourites',JSON.stringify(updated));return updated;});};useEffect(()=>{const storedUser=JSON.parse(localStorage.getItem('user'));if(storedUser){setUser(storedUser);}},[]);useEffect(()=>{setSearchQuery(searchParam);},[searchParam]);useEffect(()=>{fetch('http://localhost:8081/api/courses/getAll').then(response=>response.json()).then(data=>{setCourses(data);}).catch(error=>{console.error('Error fetching courses:',error);});},[]);const filteredCourses=Array.isArray(courses)?courses.filter(course=>course.title.toLowerCase().includes(searchQuery.toLowerCase())):[];return/*#__PURE__*/_jsxs(\"div\",{className:\"courses-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"All Courses\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"course-search\",placeholder:\"Search for a course...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value)}),/*#__PURE__*/_jsx(\"div\",{className:\"course-grid\",children:filteredCourses.length>0?filteredCourses.map((course,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"course-card\",onClick:()=>setSelectedCourse(course),children:[/*#__PURE__*/_jsx(\"img\",{src:\"/img/\".concat(course.courseId,\".svg\"),alt:\"Course \".concat(course.title),onError:e=>{e.target.src='/static/img/default.svg';}}),/*#__PURE__*/_jsx(\"h3\",{className:\"course-title\",children:course.title}),/*#__PURE__*/_jsx(\"span\",{className:\"favourite-star \".concat(favourites.includes(course.courseId)?'filled':''),onClick:e=>{e.stopPropagation();// prevent modal open\ntoggleFavourite(course.courseId);},children:\"\\u2605\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" \",course.price,\" NOK\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Difficulty:\"}),\" \",course.difficulty]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Topic:\"}),\" \",course.category]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Session:\"}),\" \",course.session]}),(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"ID:\"}),\" \",course.courseId]})]},index)):/*#__PURE__*/_jsx(\"p\",{children:\"No courses found.\"})}),/*#__PURE__*/_jsx(CourseModal,{course:selectedCourse,onClose:()=>setSelectedCourse(null)})]});};export default AllCoursesPage;","map":{"version":3,"names":["React","useState","useEffect","useLocation","CourseModal","Link","jsx","_jsx","jsxs","_jsxs","AllCoursesPage","location","params","URLSearchParams","search","searchParam","get","courses","setCourses","searchQuery","setSearchQuery","selectedCourse","setSelectedCourse","user","setUser","favourites","setFavourites","stored","localStorage","getItem","JSON","parse","toggleFavourite","courseId","prev","updated","includes","filter","id","setItem","stringify","storedUser","fetch","then","response","json","data","catch","error","console","filteredCourses","Array","isArray","course","title","toLowerCase","className","children","type","placeholder","value","onChange","e","target","length","map","index","onClick","src","concat","alt","onError","stopPropagation","price","difficulty","category","session","role","onClose"],"sources":["/Users/mariusbr/Documents/Data ingeniør/4. Semester/AppDev&WebTech/gruppe oppgave/WebAndApplication-group-18/src/pages/AllCoursesPage/AllCoursesPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport CourseModal from '../../components/courseModal/CourseModal';\nimport './AllCoursesPage.css';\nimport {Link} from 'react-router-dom';\n\nconst AllCoursesPage = () => {\n    const location = useLocation();\n    const params = new URLSearchParams(location.search);\n    const searchParam = params.get('search') || '';\n\n    const [courses, setCourses] = useState([]);\n    const [searchQuery, setSearchQuery] = useState(searchParam);\n    const [selectedCourse, setSelectedCourse] = useState(null);\n\n    const [user, setUser] = useState(null);\n\n    const [favourites, setFavourites] = useState(() => {\n        const stored = localStorage.getItem('favourites');\n        return stored ? JSON.parse(stored) : [];\n    });\n\n    const toggleFavourite = (courseId) => {\n        setFavourites(prev => {\n            const updated = prev.includes(courseId)\n                ? prev.filter(id => id !== courseId)\n                : [...prev, courseId];\n            localStorage.setItem('favourites', JSON.stringify(updated));\n            return updated;\n        });\n    };\n\n    useEffect(() => {\n        const storedUser = JSON.parse(localStorage.getItem('user'));\n        if (storedUser) {\n            setUser(storedUser);\n        }\n    }, []);\n\n    useEffect(() => {\n        setSearchQuery(searchParam);\n    }, [searchParam]);\n\n    useEffect(() => {\n        fetch('http://localhost:8081/api/courses/getAll')\n            .then(response => response.json())\n            .then(data => {\n                setCourses(data);\n            })\n            .catch(error => {\n                console.error('Error fetching courses:', error);\n            });\n    }, []);\n\n    const filteredCourses = Array.isArray(courses)\n        ? courses.filter(course =>\n            course.title.toLowerCase().includes(searchQuery.toLowerCase())\n        )\n        : [];\n\n    return (\n        <div className=\"courses-page\">\n            <h1>All Courses</h1>\n\n            <input\n                type=\"text\"\n                className=\"course-search\"\n                placeholder=\"Search for a course...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n            />\n\n            <div className=\"course-grid\">\n                {filteredCourses.length > 0 ? (\n                    filteredCourses.map((course, index) => (\n                        <div\n                            key={index}\n                            className=\"course-card\"\n                            onClick={() => setSelectedCourse(course)}\n                        >\n                            {/* You may want to set course.image dynamically */}\n                            <img\n                                src={`/img/${course.courseId}.svg`}\n                                alt={`Course ${course.title}`}\n                                onError={(e) => { e.target.src = '/static/img/default.svg'; }}\n                            />\n                            <h3 className=\"course-title\">{course.title}</h3>\n\n                            <span\n                                className={`favourite-star ${favourites.includes(course.courseId) ? 'filled' : ''}`}\n                                onClick={(e) => {\n                                    e.stopPropagation(); // prevent modal open\n                                    toggleFavourite(course.courseId);\n                                }}\n                            >\n                                ★\n                            </span>\n\n                            <p><strong>Price:</strong> {course.price} NOK</p>\n                            <p><strong>Difficulty:</strong> {course.difficulty}</p>\n                            <p><strong>Topic:</strong> {course.category}</p>\n                            <p><strong>Session:</strong> {course.session}</p>\n                            {user?.role === 'admin' && (\n                                <p><strong>ID:</strong> {course.courseId}</p>\n                            )}\n                        </div>\n                    ))\n                ) : (\n                    <p>No courses found.</p>\n                )}\n            </div>\n\n            <CourseModal\n                course={selectedCourse}\n                onClose={() => setSelectedCourse(null)}\n            />\n        </div>\n    );\n};\n\nexport default AllCoursesPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}