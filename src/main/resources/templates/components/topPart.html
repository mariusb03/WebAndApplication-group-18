<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Top Part</title>
  <link rel="stylesheet" type="text/css" th:href="@{/css/components/TopPartStyle.css}">
</head>
<script>
  function updateCartBadge() {
    const badge = document.getElementById('cartBadge');
    if (!badge) return;

    const cartItems = JSON.parse(localStorage.getItem('cart')) || [];
    const count = cartItems.length;

    if (count > 0) {
      badge.textContent = count;
      badge.style.display = 'inline-block';
    } else {
      badge.style.display = 'none';
    }
  }

  document.addEventListener('DOMContentLoaded', updateCartBadge);
</script>
<body>
<div class="topPartBox" id="topPartBox">
  <a href="../pages/landing.html" class="homeLogoButton">
    <img src="../../static/img/logos/homeLogo.svg" class="homeLogo" alt="logo" />
  </a>

  <div id="LoginAndCartButtons">
    <div class="cartLoginBt">
      <button class="searchIconButton" onclick="toggleSearchPopup()">
        <img src="../../static/img/searchSymbol.svg" alt="search" class="searchIconImage" />
      </button>
    </div>

    <a href="../pages/cart.html" class="cartLoginBt cart-icon-wrapper">
      <button aria-label="Go to cart">
        <img src="../../static/img/cartLogo.svg" alt="cart" />
        <span class="cart-badge" id="cartBadge" style="display: none;">0</span>
      </button>
    </a>

    <a href="../pages/login.html" class="cartLoginBt">
      <button>
        <img src="../../static/img/profilePic.svg" alt="login" />
      </button>
    </a>
  </div>
</div>

<!-- Search Popup -->
<div class="overlay-blur" id="searchOverlay" style="display: none;">
  <div class="search-popup" id="searchPopup">
    <input
            type="text"
            id="searchInput"
            placeholder="Search for courses"
            onkeydown="handleSearchEnter(event)"
    />
    <div id="suggestionsContainer"></div>
  </div>
</div>

<script src="../../static/js/components/TopPartOfPage.js"></script>
</body>
</html>